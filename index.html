<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <link rel="stylesheet" href="style.css">
    <title>勇者伝説RPG</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
</head>

<body id="body">
    <div>
        <div id="towerStartMenu" style="display: none;">
            <img class="title" src="無限の塔タイトル画面.png" alt="背景" width='100%' height='600px'>
            <div class="titleBlock">
                <!-- <input id="playerInputTower" class="input" type="text" placeholder="名前を入力" maxlength="10"> -->
                <button id="btnLoadGameTower" class="startBtn" onclick="startGameTower()">塔に挑戦する</button><br>
                <!-- <button class="startBtn" onclick="showInstructionsTower()">操作方法</button><br> -->
                <button class="startBtn" onclick="showTowerList()">ゲームの詳細</button><br>
                <button class="startBtn" onclick="showTowerRnaking()">ランキング</button><br>
                <button class="startBtn" onclick="titleGame()">RPGへ</button>
            </div>
            <div id="rankingTower" class="rankingPanel" style="display: none;">
                <h3 style="color: white;">ランキング（最高階数順）</h3>
                <ol style="color: white;" id="rankingTowerList"></ol>
                <div><button class="startBtn" onclick="closeTowerPanel()">❌閉じる</button></div>
            </div>
            <div id="instructionsTowerPanel" class="panel" style="display: none;">
                <div style="font-size: 10px;">
                    ◆ ゲーム操作の説明 ◆
                    <br>
                    <br>
                    Beta版なので、バグが起きる可能性があります。
                    データがバグってしまったら、ごめんなさい…
                    <br>
                    <br>
                    <div><button class="startBtn" onclick="closeTowerPanel()">❌閉じる</button></div>
                </div>
            </div>
            <div id="towerGamePanel" class="panel" style="display: none;">
                <div style="font-size: 10px; text-align: center;">
                    <br>
                    ◆ 無限の塔 ◆<br>
                    遥かなる空にそびえ立つ、謎多き「無限の塔」。<br>
                    この塔には、各階層に凶悪なモンスターたちが潜んでおり、挑戦者の行く手を阻む。<br>
                    階を上るごとに、敵はより強大になり、戦いは過酷さを増していく。<br>
                    <br>
                    10階ごとに待ち受けるボスモンスターを撃破すれば、<br>
                    RPG本編で使用できる強力なアイテムを手に入れることができる。<br>
                    その力は、冒険の行方を大きく左右するだろう──。
                    <br>
                    <br>
                    ▼ 主なボスモンスター一覧（各階層）
                    <br>
                    <br>
                    10階　炎を統べる猛将　「フレイムロード・バルガン」
                    <br>
                    20階　冥界の黒騎士　「冥騎将ダルクス」
                    <br>
                    30階　氷獄を統べる王　「氷獄王グラキエス」
                    <br>
                    40階　深海の神蛇　「海神蛇セイリュウス」
                    <br>
                    50階　紫焔の覇竜　「紫焔竜ヴァルファング」
                    <br>
                    60階　灼熱の獄鬼　「獄焔鬼バルヴァ＝ガルム」
                    <br>
                    70階　魔炎を纏う獣帝　「魔炎獣ガルヴァリウス」
                    <br>
                    80階　屍を統べる不死王　「骸帝ドラグ＝ネクロス」
                    <br>
                    90階　深淵に仕える影　「深淵の従者ネブラ」
                    <br>
                    100階　煉獄を支配する魔王　「煉獄魔王フラガ＝ドレムス」
                    <br>
                    <br>
                    終わりなき塔を制し、真の力を手に入れよ。
                    その先に待つのは栄光か、それとも破滅か──。 ChatGPT_
                    <br>
                    <div><button class="startBtn" onclick="closeTowerPanel()">❌閉じる</button></div>
                </div>
            </div>
        </div>
        <div id="startMenu" style="display: block;">
            <img class="title" src="タイトル画面.png" alt="背景" width='100%' height='600px'>
            <div class="ver">Ver.1.7 Beta</div>
            <div class="titleBlock">
                <input id="playerInput" class="input" type="text" placeholder="名前を入力" maxlength="10">
                <br>
                <div>
                    <button id="btnLoadGame" class="startBtn" onclick="playGames()">はじめから</button><br>
                    <button class="startBtn" onclick="loadGame()">つづきから</button><br>
                    <button class="startBtn" onclick="showInstructions()">操作方法</button><br>
                    <button class="startBtn" onclick="showEnemyList()">ステージ一詳細</button><br>
                    <button class="startBtn" id="loadRankingBtn" onclick="showRnaking()">ランキング</button><br>
                    <button class="startBtn" id="towerBtn" onclick="showTowerTitle()">無限の塔</button>
                </div>
            </div>
            <div id="ranking" class="rankingPanel" style="display: none;">
                <h3 style="color: white;">RPGランキング（レベル順）</h3>
                <ol style="color: white;" id="rankingList"></ol>
                <div><button class="startBtn" onclick="closePanel()">❌閉じる</button></div>
            </div>
            <div id="instructionsPanel" class="panel" style="display: none;">
                <div style="font-size: 10px;">
                    ◆ ゲーム操作の説明 ◆
                    <br>
                    <br>
                    🔰 ゲームの流れ：
                    1. 名前を入力して「ゲーム開始」ボタンを押します
                    2. セーブデータがある場合は、つづきからを押してください
                    3. メニューでプレイヤーのステータスを見ることができます
                    4. メニュー画面のセーブから、データを保存することができます
                    5. ステージを選択します
                    6. 各ステージごとに敵がランダムに登場します
                    7. ボス級モンスターを倒すと次のステージに進むことができます
                    8. 下記3つの行動から選択してターンを進めます
                    <br>
                    <br>
                    🎮 プレイヤーの行動：
                    🗡 こうげき：敵にダメージを与える。時々「会心の一撃」で大ダメージ！
                    🛡 まもる：敵の攻撃を避けやすくなり、回避成功時は少し回復します
                    🍷 どうぐ：アイテムを所持している場合のみ使用できます
                    🚀 にげる：モンスターに「こうげき」をしていなければ、逃げることができます
                    <br>
                    <br>
                    👾 敵の行動：
                    敵は毎ターン攻撃を仕掛けてきます。
                    稀に「痛恨の一撃」で大ダメージを受けることも…
                    <br>
                    <br>
                    📜 その他の機能：
                    - 敵を倒すたびに経験値を取得し、レベルが上がっていきます
                    - レベルが上がることで、能力が上昇します
                    - モンスターを倒すと、稀にアイテムをドロップします
                    - 戦闘後は「マップへ戻る」や「もう少し探索する(再戦)」ができます
                    <br>
                    <br>
                    <div><button class="startBtn" onclick="closePanel()">❌閉じる</button></div>
                </div>
            </div>
            <div id="enemyListPanel" class="panel" style="display: none;">
                <div style="font-size: 10px;">
                    ◆ マップ一覧 ◆
                    <br>
                    <br>
                    ステージ1：始まりの森
                    ボス級モンスター：「ゲベロペ」
                    <br>
                    <br>
                    ステージ2：大きな洞窟
                    ボス級モンスター：「ガーゴイル」
                    <br>
                    <br>
                    ステージ3：スノーフェアリー
                    ボス級モンスター：「スノーワイバーン」
                    <br>
                    <br>
                    ステージ4：北の大地
                    ボス級モンスター：「大天使」
                    <br>
                    <br>
                    ステージ5：カラカラ山
                    ボス級モンスター：「ヴェノメギド」
                    <br>
                    <br>
                    ステージ6：サハラ砂漠
                    ボス級モンスター：「インフェルナード」
                    <br>
                    <br>
                    ステージ7：神秘の森
                    ボス級モンスター：「グリムヴェイル」
                    <br>
                    <br>
                    ステージ8：魔王城
                    ボス級モンスター：「魔王」
                    <br>
                    <br>
                    <div><button class="startBtn" onclick="closePanel()">❌閉じる</button></div>
                </div>
            </div>
        </div>
    </div>
    </div>
    <div id="gameUI" style="display: none;">
        <div id="battle" class="battle" style="display: block;">
            <div id="area" class="area"></div>
            <!-- enemyBar -->
            <div class="playerBar">
                <p><span id="enemyName"></span>&emsp;レベル : <span id="enemyLevel"></span>&emsp;HP
                    : <span id="enemyHP"></span></p>
                <div class="enemyMaxHP">
                    <div id="enemyHPBar" class="enemyHP"></div>
                </div>
            </div>
            <div id="monster" class="monster animate__animated animate__fadeIn"></div>
            <div id="monster2" class="monster2 animate__animated animate__fadeIn"></div>
            <div id="effect" class="effect"></div>
            <div id="flashCover" class="flash-cover"></div>
            <div id="overlay" class="overlay" style="display: none;">
                <div id="haveItems" class="bugMenu">
                    <button id="haveHpPotion" class="startBtn" style="display: none;" onclick="useHpPotion()">治癒のポーション ×
                        <span id="haveBug1"></span></button>
                    <button id="havePwrPotion" class="startBtn" style="display: none;" onclick="">力のポーション × <span
                            id="haveBug2"></span></button>
                    <button id="haveHpUpPotion" class="startBtn" style="display: none;" onclick="">体力のポーション × <span
                            id="haveBug3"></span></button>
                    <button id="haveEternalPotion" class="startBtn" style="display: none;"
                        onclick="useEternalPotion()">エターナルポーション × <span id="haveBug4"></span></button>
                    <div id="noBug" style="display: block;">なし</div>
                    <br>
                    <div><button class="startBtn" onclick="closeBug()">❌閉じる</button></div>
                </div>
            </div>
            <div class="playerBtnMenu">
                <br>
                <button id="attackBtn" class="playBtn" onclick="playerAttack()">こうげき</button>
                <br>
                <br>
                <button id="defendBtn" class="playBtn" onclick="defendAction()">まもる</button>
                <br>
                <br>
                <button id="itemsBtn" class="playBtn" onclick="useItems()">どうぐ</button>
                <br>
                <br>
                <button class="playBtn" onclick="runAway()">にげる</button>
                <br>
                <br>
            </div>
            <!-- playerBar -->
            <div class="enemyBar">
                <p>プレイヤー: <span id="playerName"></span>&emsp;&emsp;LEVEL : <span id="playerLevel"></span>
                    <br>
                    HP : <span id="playerHP"></span>&emsp;&emsp;Attack : <span id="playerAttack"></span>
                </p>
                <div class="playerMaxHP">
                    <div id="playerHPBar" class="playerHP"></div>
                </div>
                <div class="playerMaxPoints">
                    <div id="playerPointsBar" class="playerPoints"></div>
                </div>
                <div id="logPanel" style="display: none;">
                    <div>
                        <div id="battleLog" class="battleLog" style="display: block;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="mapUnderground" style="display: none;">
        <div class="mapUnderground animate__animated animate__fadeIn">
            <img src="ver1.6/mapUnderground.png" alt="mapUnderground" width="100%" height="550px">
            <div>
                <button class="stage15" onclick="startGames15()">赤の魔法陣</button>
                <button class="stage16" onclick="startGames16()">青の魔法陣</button>
                <button class="stage17" onclick="startGames17()">黄の魔法陣</button>
                <button class="stage18" onclick="startGames18()">緑の魔法陣</button>
                <button id="stage19" style="display: none;" class="stage19" onclick="startGames19()">虹の魔法陣</button>
                <button id="extra5" style="display: none;" class="extra5" onclick="extra5()">「光神ルミナリア」</button>
                <button class="mapMove" onclick="mapGame()">地上へ戻る</button>
            </div>
            <div id="game3ClearPanel" class="panel animate__animated animate__fadeIn" style="display: none;">
                ****** ゲームクリア ******
                <br>
                <br>
                光神ルミナリアを倒した…
                世界に平和が戻った。
                長き戦いに終止符が打たれた今、
                あなたの冒険も、静かに幕を閉じる
                <br>
                <br>
                <div><button class="startBtn" onclick="closeClearPanel3()">❌閉じる</button></div>
            </div>
        </div>
        <button class="menuBtn" onclick="menuOpen()">メニュー</button>
        <button class="titleBtn" onclick="titleGame()">タイトルへ</button>
    </div>
    <div id="mapHeaven" style="display: none;">
        <div class="mapHeaven animate__animated animate__fadeIn">
            <img src="ver1.5/mapHeaven.png" alt="mapHeaven" width="100%" height="550px">
            <div>
                <button class="stage8" onclick="startGames8()">空の草原</button>
                <button class="stage9" onclick="startGames9()">モクモクの森</button>
                <button class="stage10" onclick="startGames10()">避雷針</button>
                <button class="stage11" onclick="startGames11()">天空城</button>
                <button class="stage12" onclick="startGames12()">ロコモコ山</button>
                <button class="stage13" onclick="startGames13()">天空の祭壇</button>
                <button class="stage14" onclick="startGames14()">点氷山</button>
                <button id="extra3" style="display: none;" class="extra3" onclick="extra3()">天空龍</button>
                <button id="extra4" style="display: none;" class="extra4" onclick="extra4()">「ザクナ」</button>
                <button class="mapMove" onclick="mapGame()">地上へ戻る</button>
            </div>
            <div id="game2ClearPanel" class="panel animate__animated animate__fadeIn" style="display: none;">
                ****** ゲームクリア ******
                <br>
                <br>
                ザクナを倒した…
                世界に平和が戻った。
                長き戦いに終止符が打たれた今、
                あなたの冒険も、静かに幕を閉じる
                …そして、新たな伝説が始まる。
                <br>
                <br>
                <div><button class="startBtn" onclick="closeClearPanel2()">❌閉じる</button></div>
            </div>
        </div>
        <button class="menuBtn" onclick="menuOpen()">メニュー</button>
        <button class="titleBtn" onclick="titleGame()">タイトルへ</button>
    </div>
    <div id="map" style="display: none;">
        <div class="map animate__animated animate__fadeIn">
            <img src="map/MAP.png" alt="MAP" width="100%" height="550px">
            <img id="kumo" style="transform: scaleY(-1); display: block;" class="kumo" src="map/kumo.png" alt="雲"
                width="53%" height="110%">
            <div>
                <button class="castle" onclick="castleShow()">ダイヤモンド<br>&emsp;マーメイド城</button> <button class="stage1"
                    onclick="startGames1()">始まりの森</button>
                <button class="stage2" onclick="startGames2()">大きな洞窟</button>
                <button id="extra1" style="display: none;" class="extra1" onclick="extra1()">岩石の番人</button>
                <button id="extra2" style="display: none;" class="extra2" onclick="extra2()">麒麟</button>
                <button class="stage3" onclick="startGames3()">スノーフェアリー</button>
                <button class="stage4" onclick="startGames4()">北の大地</button>
                <button id="stage5" style="display: none;" class="stage5" onclick="startGames5()">カラカラ山</button>
                <button id="stage6" style="display: none;" class="stage6" onclick="startGames6()">サハラ砂漠</button>
                <button id="stage7" style="display: none;" class="stage7" onclick="startGames7()">神秘の森</button>
                <button id="stageLast" style="display: none;" class="stageLast" onclick="startGamesLast()">魔王城</button>
                <button id="mapMoveToHeaven" style="display: none;" class="mapMoveToHeaven"
                    onclick="mapMoveToHeaven()">天空へ行く</button>
                <button id="mapMoveToUnderground" style="display: none;" class="mapMoveToUnderground"
                    onclick="mapMoveToUnderground()">地底へ行く</button>
            </div>
            <div id="gameClearPanel" class="panel animate__animated animate__fadeIn" style="display: none;">
                ****** ゲームクリア ******
                <br>
                <br>
                魔王が断末魔の叫びをあげ、ついに倒れた。
                世界に平和が戻った。
                長き戦いに終止符が打たれた今、
                あなたの冒険も、静かに幕を閉じる
                …そして、新たな伝説が始まる。
                <br>
                <br>
                <div><button class="startBtn" onclick="closeClearPanel()">❌閉じる</button></div>
            </div>
        </div>
        <div>
            <button class="menuBtn" onclick="menuOpen()">メニュー</button>
            <button class="titleBtn" onclick="titleGame()">タイトルへ</button>
        </div>
    </div>
    <div id="castle" style="display: none;">
        <img class="castleMenu animate__animated animate__fadeIn" src="map/castle.png" alt="背景" width='100%'
            height='550px'>
        <div class="castleMenuResult">
            <button class="startBtn" onclick="itemshop()">アイテム屋へ</button>
            <br>
            <br>
            <button class="startBtn" onclick="weaponshop()">鍛冶屋へ</button>
        </div>
        <span><button class="backBtn" onclick="menuClose()">戻る</button></span>
    </div>
    <div id="itemshop" style="display: none;">
        <img class="animate__animated animate__fadeIn" src="map/アイテム屋.png" alt="背景" width='100%' height='550px'>
        <div class="castleMenuResult">
            <div style="font-size: 10px;"><span>所持ゴールド：<span id="playerGold"></span></span></div>
            <br>
            <img src="items1/治癒のポーション.png" alt="ポーション" width="20px" height="20px"><button class="startBtn"
                onclick="buyHpPotion()">治癒のポーション<br>30000ゴールド</button>
            <br>
            <br>
            <img src="items1/力のポーション.png" alt="ポーション" width="20px" height="20px"><button class="startBtn"
                onclick="buyPwPotion()">力のポーション<br>50000ゴールド</button>
            <br>
            <br>
            <img src="items1/体力のポーション.png" alt="ポーション" width="20px" height="20px"><button class="startBtn"
                onclick="buyHpUpPotion()">体力のポーション<br>60000ゴールド</button>
        </div>
        <span><button class="backBtn" onclick="castleShow()">戻る</button></span>
    </div>
    <div id="weaponshop" style="display: none;">
        <img class="shopMenu animate__animated animate__fadeIn" src="map/鍛冶屋.png" alt="背景" width='100%' height='550px'>
        <div class="castleMenuResult">
            <button class="startBtn">武器1&emsp;400ゴールド</button>
            <br>
            <br>
            <button class="startBtn">武器2&emsp;300ゴールド</button>
        </div>
        <span><button class="backBtn" onclick="castleShow()">戻る</button></span>
    </div>
    <div id="menu" class="menu" style="display: none;">
        <img class="animate__animated animate__fadeIn" src="menu/playerMenu.png" alt="背景" width='100%' height='550px'>
        <div class="status animate__animated animate__fadeIn">
            <p>プレイヤー: <span id="Name"></span><br><br>
                レベル : <span id="Level"></span>&emsp;&emsp;&emsp;HP: <span id="HP"></span>&emsp;&emsp;&emsp;攻撃力 :
                <span id="Attack"></span>
                <br><br>所持ゴールド : <span id="Coin"></span>
                <br>
                <br>
                称号：<span id="playerBadge"></span>
            </p>
        </div>
        <div class="bug animate__animated animate__fadeIn">
            <div>持ち物</div>
            <div class="items">
                <div id="hpPotion" style="display: none;" onclick="compoundingEternalPotion()"><img
                        src="items1/治癒のポーション.png" alt="ポーション" width="15px" height="15px"
                        style="vertical-align: middle;">治癒のポーション × <span id="have1"></span></div>
                <div id="pwPotion" style="display: none;" onclick="usePwPotion()"><img src="items1/力のポーション.png"
                        alt="ポーション" width="15px" height="15px" style="vertical-align: middle;">力のポーション × <span
                        id="have2"></span></div>
                <div id="hpupPotion" style="display: none;" onclick="useHpUpPotion()"><img src="items1/体力のポーション.png"
                        alt="ポーション" width="15px" height="15px" style="vertical-align: middle;">体力のポーション × <span
                        id="have3"></span></div>
                <div id="eternalPotion" style="display: none;" onclick=""><img src="ver1.6/エターナルポーション.png" alt="ポーション"
                        width="15px" height="15px" style="vertical-align: middle;">エターナルポーション × <span id="have4"></span>
                </div>
                <div id="no" style="display: block;">なし</div>
            </div>
        </div>
        <img class="player animate__animated animate__fadeIn" src="menu/勇者.png" alt="勇者" width="200px" height="200px">
        <div class="button-container">
            <button class="backMenuBtn" onclick="menuClose()">戻る</button>
            <button class="saveBtn" onclick="saveGame()">セーブ</button>
            <button class="saveBtn" id="renameBtn" onclick="changePlayerName()">名前変更</button>
        </div>
    </div>
    <div id="restartMenu" class="resultScreen" style="display: none;">
        <div id="win" class="result" style="display: block;">
            <div id="levelUpShow" style="display: none;">レベルが<span id="levelup"></span><span>になった！</span></div><br>
            <span id="winName"></span><span>を倒した！</span><br>
            <span>獲得ゴールド&emsp;</span><span id="winGold"></span><br>
            <span>獲得経験値</span>&emsp;<span id="winPoints"></span><br>
            <span>入手アイテム</span>&emsp;<span id="rareItems"></span><br>
            <br>
            <br>
            <button id="map1" class="startBtn" onclick="mapGame()" style="display: block;">マップへ戻る</button>
            <button id="map2" class="startBtn" onclick="mapHeavenGame()" style="display: none;">天空へ戻る</button>
            <button id="map3" class="startBtn" onclick="mapUndergroundGame()" style="display: none;">地底へ戻る</button>
            <br>
            <br>
            <button id="nextBattle" style="display: none;" class="startBtn" onclick="restartGame()">もう少し探索する</button>
            <button class="startBtn" style="display: none;" onclick="downloadSessionLog()">ログを保存する</button>
            <br>
            <br>
            <br>
            <div id="sessionLogPanel" style="display: none;">
                <div>
                    <div style="display: block;"></div>
                </div>
            </div>
        </div>
        <div id="lose" class="result" style="display: none;">
            <div>
                <span id="eName"></span><span>にやられてしまった…</span><br>
                <p>プレイヤー: <span id="resultName"></span><br>
                    レベル : <span id="resultLevel"></span><br>
                    HP: <span id="resultHP"></span><br>
                    攻撃力 : <span id="resultAttack"></span><br>
                    所持ゴールド : <span id="resultCoin"></span><br>
                </p>
            </div>
            <button class="titleEndBtn" onclick="titleGame()">タイトルへ</button>
        </div>
    </div>
    <div id="restartMenuTower" class="resultScreen" style="display: none;">
        <div id="towerWin" class="result" style="display: block;">
            <span id="winNameTower"></span><span>を倒した！</span><br>
            <br>
            <span>報酬</span><br>
            <span id="rareItemsHpPotion"></span><br>
            <span id="rareItemsPwPotion"></span><br>
            <span id="rareItemsHpUpPotion"></span><br>
            <span id="rareItemsEternalPotion"></span><br>
            <!-- <button id="map1" class="startBtn" onclick="mapGame()" style="display: block;">マップへ戻る</button> -->
            <br>
            <button id="towerEnd" class="startBtn" onclick="showTowerTitle()" style="display: none;">タイトルへ戻る</button>
            <button id="nextBattleTower" class="startBtn" onclick="goNextFloor()"
                style="display: block;">次の階へ進む</button>
        </div>
        <div id="towerLose" class="result" style="display: none;">
            <div>
                <span id="eNameTower"></span><span>にやられてしまった…</span>
                <br>
                <p>最高階数 : <span id="resultTower"></span></p>
                <p>プレイヤー: <span id="resultNameTower"></span><br>
                    レベル : <span id="resultLevelTower"></span><br>
                    HP: <span id="resultHPTower"></span><br>
                    攻撃力 : <span id="resultAttackTower"></span>
                </p>
            </div>
            <button class="titleEndBtn" onclick="showTowerTitle()">タイトルへ</button>
        </div>
    </div>
</body>

<script type="module">
    // Firebase v9 CDN
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import {
        getFirestore,
        collection,
        query,
        orderBy,
        limit,
        getDocs
    } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyCsmpHXEvQNHNTMk1hqiCi-jOmsYBqvSzg",
        authDomain: "the-legend-of-the-hero-rpg.firebaseapp.com",
        projectId: "the-legend-of-the-hero-rpg",
        storageBucket: "the-legend-of-the-hero-rpg.appspot.com",
        messagingSenderId: "229539309178",
        appId: "1:229539309178:web:e32420bdd694fc09c63dc3",
        measurementId: "G-FZXYLBMPX3"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    async function loadRanking() {
        const rankingList = document.getElementById("rankingList");
        rankingList.innerHTML = "";

        const q = query(collection(db, "ranking"), orderBy("level", "desc"), limit(10));
        const snapshot = await getDocs(q);

        snapshot.forEach(doc => {
            const data = doc.data();
            const li = document.createElement("li");
            li.textContent = `${data.name} : Lv.${data.level}`;
            rankingList.appendChild(li);
        });
    }

    window.onload = loadRanking;
</script>

<script type="module" src="script.js"></script>

</html>
